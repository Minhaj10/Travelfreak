{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Travel\\\\Travelfreak\\\\Travel freak\\\\Frontend\\\\src\\\\components\\\\Form\\\\Form.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { TextField, Button, Typography, Paper } from \"@material-ui/core\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport FileBase from \"react-file-base64\";\nimport { useHistory } from \"react-router-dom\";\nimport ChipInput from \"material-ui-chip-input\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { createPost, updatePost } from \"../../actions/posts\";\nimport useStyles from \"./styles\";\nimport { purple, pink, orange, blueGrey } from \"@mui/material/colors\";\nimport { styled } from \"@mui/material/styles\";\nconst WhiteTextTypography = withStyles({\n  root: {\n    color: \"white\"\n  }\n})(Typography);\nconst ColorButton = styled(Button)(({\n  theme\n}) => ({\n  color: theme.palette.getContrastText(purple[500]),\n  backgroundColor: pink[800],\n  \"&:hover\": {\n    backgroundColor: orange[600]\n  }\n}));\nconst ClearButton = styled(Button)(({\n  theme\n}) => ({\n  color: theme.palette.getContrastText(blueGrey[500]),\n  backgroundColor: blueGrey[900],\n  \"&:hover\": {\n    backgroundColor: blueGrey[500]\n  }\n}));\n\nconst Form = ({\n  currentId,\n  setCurrentId\n}) => {\n  var _user$result3;\n\n  const [postData, setPostData] = useState({\n    title: \"\",\n    message: \"\",\n    tags: [],\n    selectedFile: \"\"\n  });\n  const post = useSelector(state => currentId ? state.posts.posts.find(message => message._id === currentId) : null);\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem(\"profile\"));\n  const history = useHistory();\n\n  const clear = () => {\n    setCurrentId(0);\n    setPostData({\n      title: \"\",\n      message: \"\",\n      tags: [],\n      selectedFile: \"\"\n    });\n  };\n\n  useEffect(() => {\n    if (!(post === null || post === void 0 ? void 0 : post.title)) clear();\n    if (post) setPostData(post);\n  }, [post]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (currentId === 0) {\n      var _user$result;\n\n      dispatch(createPost({ ...postData,\n        name: user === null || user === void 0 ? void 0 : (_user$result = user.result) === null || _user$result === void 0 ? void 0 : _user$result.name\n      }, history));\n      clear();\n    } else {\n      var _user$result2;\n\n      dispatch(updatePost(currentId, { ...postData,\n        name: user === null || user === void 0 ? void 0 : (_user$result2 = user.result) === null || _user$result2 === void 0 ? void 0 : _user$result2.name\n      }));\n      clear();\n    }\n  };\n\n  if (!(user === null || user === void 0 ? void 0 : (_user$result3 = user.result) === null || _user$result3 === void 0 ? void 0 : _user$result3.name)) {\n    return /*#__PURE__*/React.createElement(Paper, {\n      className: classes.paper,\n      elevation: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, \"Please Sign In to create your own Travel post and like other's post.\"));\n  }\n\n  const handleAddChip = tag => {\n    setPostData({ ...postData,\n      tags: [...postData.tags, tag]\n    });\n  };\n\n  const handleDeleteChip = chipToDelete => {\n    setPostData({ ...postData,\n      tags: postData.tags.filter(tag => tag !== chipToDelete)\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    autoComplete: \"off\",\n    noValidate: true,\n    className: `${classes.root} ${classes.form}`,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.paper,\n    elevation: 6,\n    style: {\n      backgroundColor: \"#900C3F\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      justifyContent: \"space-around\",\n      gap: \"130px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(WhiteTextTypography, {\n    variant: \"h6\",\n    style: {\n      colour: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, currentId ? `Editing \"${post === null || post === void 0 ? void 0 : post.title}\"` : \"Creating a Post\"), /*#__PURE__*/React.createElement(TextField, {\n    name: \"title\",\n    variant: \"outlined\",\n    label: \"Headline\",\n    fullWidth: true,\n    value: postData.title,\n    onChange: e => setPostData({ ...postData,\n      title: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    name: \"message\",\n    variant: \"outlined\",\n    label: \"Whats on your mind?\",\n    fullWidth: true,\n    multiline: true,\n    rows: 4,\n    value: postData.message,\n    onChange: e => setPostData({ ...postData,\n      message: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"5px 0\",\n      width: \"98%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ChipInput, {\n    name: \"tags\",\n    variant: \"outlined\",\n    label: \"Tags\",\n    fullWidth: true,\n    value: postData.tags,\n    onAdd: chip => handleAddChip(chip),\n    onDelete: chip => handleDeleteChip(chip),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.fileInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FileBase, {\n    type: \"file\",\n    multiple: false,\n    onDone: ({\n      base64\n    }) => setPostData({ ...postData,\n      selectedFile: base64\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      justifyContent: \"center\",\n      gap: \"10px\",\n      paddingTop: \"300px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ClearButton, {\n    variant: \"contained\",\n    color: \"secondary\",\n    size: \"small\",\n    onClick: clear,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 29\n    }\n  }, \"Clear\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ColorButton, {\n    className: classes.buttonSubmit,\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"small\",\n    type: \"submit\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 29\n    }\n  }, \"Submit\"))))));\n};\n\nexport default Form;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Travel/Travelfreak/Travel freak/Frontend/src/components/Form/Form.js"],"names":["React","useState","useEffect","TextField","Button","Typography","Paper","useDispatch","useSelector","FileBase","useHistory","ChipInput","withStyles","createPost","updatePost","useStyles","purple","pink","orange","blueGrey","styled","WhiteTextTypography","root","color","ColorButton","theme","palette","getContrastText","backgroundColor","ClearButton","Form","currentId","setCurrentId","postData","setPostData","title","message","tags","selectedFile","post","state","posts","find","_id","dispatch","classes","user","JSON","parse","localStorage","getItem","history","clear","handleSubmit","e","preventDefault","name","result","paper","handleAddChip","tag","handleDeleteChip","chipToDelete","filter","form","display","flexWrap","justifyContent","gap","colour","target","value","padding","width","chip","fileInput","base64","paddingTop","buttonSubmit"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,SAAT,EAAoBC,MAApB,EAA4BC,UAA5B,EAAwCC,KAAxC,QAAqD,mBAArD;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,qBAAvC;AACA,OAAOC,SAAP,MAAsB,UAAtB;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,MAAvB,EAA+BC,QAA/B,QAA+C,sBAA/C;AACA,SAASC,MAAT,QAAuB,sBAAvB;AAGA,MAAMC,mBAAmB,GAAGT,UAAU,CAAC;AACnCU,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAE;AADH;AAD6B,CAAD,CAAV,CAIvBlB,UAJuB,CAA5B;AAKA,MAAMmB,WAAW,GAAGJ,MAAM,CAAChB,MAAD,CAAN,CAAe,CAAC;AAAEqB,EAAAA;AAAF,CAAD,MAAgB;AAC/CF,EAAAA,KAAK,EAAEE,KAAK,CAACC,OAAN,CAAcC,eAAd,CAA8BX,MAAM,CAAC,GAAD,CAApC,CADwC;AAE/CY,EAAAA,eAAe,EAAEX,IAAI,CAAC,GAAD,CAF0B;AAG/C,aAAW;AACPW,IAAAA,eAAe,EAAEV,MAAM,CAAC,GAAD;AADhB;AAHoC,CAAhB,CAAf,CAApB;AAQA,MAAMW,WAAW,GAAGT,MAAM,CAAChB,MAAD,CAAN,CAAe,CAAC;AAAEqB,EAAAA;AAAF,CAAD,MAAgB;AAC/CF,EAAAA,KAAK,EAAEE,KAAK,CAACC,OAAN,CAAcC,eAAd,CAA8BR,QAAQ,CAAC,GAAD,CAAtC,CADwC;AAE/CS,EAAAA,eAAe,EAAET,QAAQ,CAAC,GAAD,CAFsB;AAG/C,aAAW;AACPS,IAAAA,eAAe,EAAET,QAAQ,CAAC,GAAD;AADlB;AAHoC,CAAhB,CAAf,CAApB;;AAQA,MAAMW,IAAI,GAAG,CAAC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA;AAAb,CAAD,KAAiC;AAAA;;AAC1C,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BjC,QAAQ,CAAC;AACrCkC,IAAAA,KAAK,EAAE,EAD8B;AAErCC,IAAAA,OAAO,EAAE,EAF4B;AAGrCC,IAAAA,IAAI,EAAE,EAH+B;AAIrCC,IAAAA,YAAY,EAAE;AAJuB,GAAD,CAAxC;AAMA,QAAMC,IAAI,GAAG/B,WAAW,CAAEgC,KAAD,IACrBT,SAAS,GACHS,KAAK,CAACC,KAAN,CAAYA,KAAZ,CAAkBC,IAAlB,CAAwBN,OAAD,IAAaA,OAAO,CAACO,GAAR,KAAgBZ,SAApD,CADG,GAEH,IAHc,CAAxB;AAKA,QAAMa,QAAQ,GAAGrC,WAAW,EAA5B;AACA,QAAMsC,OAAO,GAAG9B,SAAS,EAAzB;AACA,QAAM+B,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAb;AACA,QAAMC,OAAO,GAAGzC,UAAU,EAA1B;;AAEA,QAAM0C,KAAK,GAAG,MAAM;AAChBpB,IAAAA,YAAY,CAAC,CAAD,CAAZ;AACAE,IAAAA,WAAW,CAAC;AAAEC,MAAAA,KAAK,EAAE,EAAT;AAAaC,MAAAA,OAAO,EAAE,EAAtB;AAA0BC,MAAAA,IAAI,EAAE,EAAhC;AAAoCC,MAAAA,YAAY,EAAE;AAAlD,KAAD,CAAX;AACH,GAHD;;AAKApC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,EAACqC,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEJ,KAAP,CAAJ,EAAkBiB,KAAK;AACvB,QAAIb,IAAJ,EAAUL,WAAW,CAACK,IAAD,CAAX;AACb,GAHQ,EAGN,CAACA,IAAD,CAHM,CAAT;;AAKA,QAAMc,YAAY,GAAG,MAAOC,CAAP,IAAa;AAC9BA,IAAAA,CAAC,CAACC,cAAF;;AAEA,QAAIxB,SAAS,KAAK,CAAlB,EAAqB;AAAA;;AACjBa,MAAAA,QAAQ,CACJ/B,UAAU,CAAC,EAAE,GAAGoB,QAAL;AAAeuB,QAAAA,IAAI,EAAEV,IAAF,aAAEA,IAAF,uCAAEA,IAAI,CAAEW,MAAR,iDAAE,aAAcD;AAAnC,OAAD,EAA4CL,OAA5C,CADN,CAAR;AAGAC,MAAAA,KAAK;AACR,KALD,MAKO;AAAA;;AACHR,MAAAA,QAAQ,CACJ9B,UAAU,CAACiB,SAAD,EAAY,EAAE,GAAGE,QAAL;AAAeuB,QAAAA,IAAI,EAAEV,IAAF,aAAEA,IAAF,wCAAEA,IAAI,CAAEW,MAAR,kDAAE,cAAcD;AAAnC,OAAZ,CADN,CAAR;AAGAJ,MAAAA,KAAK;AACR;AACJ,GAdD;;AAgBA,MAAI,EAACN,IAAD,aAACA,IAAD,wCAACA,IAAI,CAAEW,MAAP,kDAAC,cAAcD,IAAf,CAAJ,EAAyB;AACrB,wBACI,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAEX,OAAO,CAACa,KAA1B;AAAiC,MAAA,SAAS,EAAE,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,UAAD;AAAY,MAAA,OAAO,EAAC,IAApB;AAAyB,MAAA,KAAK,EAAC,QAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8EADJ,CADJ;AAQH;;AAED,QAAMC,aAAa,GAAIC,GAAD,IAAS;AAC3B1B,IAAAA,WAAW,CAAC,EAAE,GAAGD,QAAL;AAAeI,MAAAA,IAAI,EAAE,CAAC,GAAGJ,QAAQ,CAACI,IAAb,EAAmBuB,GAAnB;AAArB,KAAD,CAAX;AACH,GAFD;;AAIA,QAAMC,gBAAgB,GAAIC,YAAD,IAAkB;AACvC5B,IAAAA,WAAW,CAAC,EACR,GAAGD,QADK;AAERI,MAAAA,IAAI,EAAEJ,QAAQ,CAACI,IAAT,CAAc0B,MAAd,CAAsBH,GAAD,IAASA,GAAG,KAAKE,YAAtC;AAFE,KAAD,CAAX;AAIH,GALD;;AAOA,sBACI;AACI,IAAA,YAAY,EAAC,KADjB;AAEI,IAAA,UAAU,MAFd;AAGI,IAAA,SAAS,EAAG,GAAEjB,OAAO,CAACvB,IAAK,IAAGuB,OAAO,CAACmB,IAAK,EAH/C;AAII,IAAA,QAAQ,EAAEX,YAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMI,oBAAC,KAAD;AACI,IAAA,SAAS,EAAER,OAAO,CAACa,KADvB;AAEI,IAAA,SAAS,EAAE,CAFf;AAGI,IAAA,KAAK,EAAE;AAAE9B,MAAAA,eAAe,EAAE;AAAnB,KAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKI;AACI,IAAA,KAAK,EAAE;AACHqC,MAAAA,OAAO,EAAE,MADN;AAEHC,MAAAA,QAAQ,EAAE,MAFP;AAGHC,MAAAA,cAAc,EAAE,cAHb;AAIHC,MAAAA,GAAG,EAAE;AAJF,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,mBAAD;AAAqB,IAAA,OAAO,EAAC,IAA7B;AAAkC,IAAA,KAAK,EAAE;AAACC,MAAAA,MAAM,EAAE;AAAT,KAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKtC,SAAS,GACH,YAAWQ,IAAZ,aAAYA,IAAZ,uBAAYA,IAAI,CAAEJ,KAAM,GADpB,GAEJ,iBAHV,CADJ,eAMI,oBAAC,SAAD;AACI,IAAA,IAAI,EAAC,OADT;AAEI,IAAA,OAAO,EAAC,UAFZ;AAGI,IAAA,KAAK,EAAC,UAHV;AAII,IAAA,SAAS,MAJb;AAKI,IAAA,KAAK,EAAEF,QAAQ,CAACE,KALpB;AAMI,IAAA,QAAQ,EAAGmB,CAAD,IACNpB,WAAW,CAAC,EACR,GAAGD,QADK;AAERE,MAAAA,KAAK,EAAEmB,CAAC,CAACgB,MAAF,CAASC;AAFR,KAAD,CAPnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,eAmBI,oBAAC,SAAD;AACI,IAAA,IAAI,EAAC,SADT;AAEI,IAAA,OAAO,EAAC,UAFZ;AAGI,IAAA,KAAK,EAAC,qBAHV;AAII,IAAA,SAAS,MAJb;AAKI,IAAA,SAAS,MALb;AAMI,IAAA,IAAI,EAAE,CANV;AAOI,IAAA,KAAK,EAAEtC,QAAQ,CAACG,OAPpB;AAQI,IAAA,QAAQ,EAAGkB,CAAD,IACNpB,WAAW,CAAC,EACR,GAAGD,QADK;AAERG,MAAAA,OAAO,EAAEkB,CAAC,CAACgB,MAAF,CAASC;AAFV,KAAD,CATnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBJ,eAkCI;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,OAAO,EAAE,OAAX;AAAoBC,MAAAA,KAAK,EAAE;AAA3B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AACI,IAAA,IAAI,EAAC,MADT;AAEI,IAAA,OAAO,EAAC,UAFZ;AAGI,IAAA,KAAK,EAAC,MAHV;AAII,IAAA,SAAS,MAJb;AAKI,IAAA,KAAK,EAAExC,QAAQ,CAACI,IALpB;AAMI,IAAA,KAAK,EAAGqC,IAAD,IAAUf,aAAa,CAACe,IAAD,CANlC;AAOI,IAAA,QAAQ,EAAGA,IAAD,IAAUb,gBAAgB,CAACa,IAAD,CAPxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAlCJ,eA6CI;AAAK,IAAA,SAAS,EAAE7B,OAAO,CAAC8B,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,QAAD;AACI,IAAA,IAAI,EAAC,MADT;AAEI,IAAA,QAAQ,EAAE,KAFd;AAGI,IAAA,MAAM,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,KACJ1C,WAAW,CAAC,EACR,GAAGD,QADK;AAERK,MAAAA,YAAY,EAAEsC;AAFN,KAAD,CAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CA7CJ,CARJ,eAmEI;AACI,IAAA,KAAK,EAAE;AACHX,MAAAA,OAAO,EAAE,MADN;AAEHC,MAAAA,QAAQ,EAAE,MAFP;AAGHC,MAAAA,cAAc,EAAE,QAHb;AAIHC,MAAAA,GAAG,EAAE,MAJF;AAKHS,MAAAA,UAAU,EAAE;AALT,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,WAAD;AACI,IAAA,OAAO,EAAC,WADZ;AAEI,IAAA,KAAK,EAAC,WAFV;AAGI,IAAA,IAAI,EAAC,OAHT;AAII,IAAA,OAAO,EAAEzB,KAJb;AAKI,IAAA,SAAS,MALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,CATJ,eAqBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,WAAD;AACI,IAAA,SAAS,EAAEP,OAAO,CAACiC,YADvB;AAEI,IAAA,OAAO,EAAC,WAFZ;AAGI,IAAA,KAAK,EAAC,SAHV;AAII,IAAA,IAAI,EAAC,OAJT;AAKI,IAAA,IAAI,EAAC,QALT;AAMI,IAAA,SAAS,MANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,CArBJ,CAnEJ,CALJ,CANJ,CADJ;AAqHH,CAtLD;;AAwLA,eAAehD,IAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { TextField, Button, Typography, Paper } from \"@material-ui/core\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport FileBase from \"react-file-base64\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport ChipInput from \"material-ui-chip-input\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { createPost, updatePost } from \"../../actions/posts\";\r\nimport useStyles from \"./styles\";\r\nimport { purple, pink, orange, blueGrey } from \"@mui/material/colors\";\r\nimport { styled } from \"@mui/material/styles\";\r\n\r\n\r\nconst WhiteTextTypography = withStyles({\r\n    root: {\r\n      color: \"white\"\r\n    }\r\n  })(Typography);\r\nconst ColorButton = styled(Button)(({ theme }) => ({\r\n    color: theme.palette.getContrastText(purple[500]),\r\n    backgroundColor: pink[800],\r\n    \"&:hover\": {\r\n        backgroundColor: orange[600],\r\n    },\r\n}));\r\n\r\nconst ClearButton = styled(Button)(({ theme }) => ({\r\n    color: theme.palette.getContrastText(blueGrey[500]),\r\n    backgroundColor: blueGrey[900],\r\n    \"&:hover\": {\r\n        backgroundColor: blueGrey[500],\r\n    },\r\n}));\r\n\r\nconst Form = ({ currentId, setCurrentId }) => {\r\n    const [postData, setPostData] = useState({\r\n        title: \"\",\r\n        message: \"\",\r\n        tags: [],\r\n        selectedFile: \"\",\r\n    });\r\n    const post = useSelector((state) =>\r\n        currentId\r\n            ? state.posts.posts.find((message) => message._id === currentId)\r\n            : null\r\n    );\r\n    const dispatch = useDispatch();\r\n    const classes = useStyles();\r\n    const user = JSON.parse(localStorage.getItem(\"profile\"));\r\n    const history = useHistory();\r\n\r\n    const clear = () => {\r\n        setCurrentId(0);\r\n        setPostData({ title: \"\", message: \"\", tags: [], selectedFile: \"\" });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!post?.title) clear();\r\n        if (post) setPostData(post);\r\n    }, [post]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (currentId === 0) {\r\n            dispatch(\r\n                createPost({ ...postData, name: user?.result?.name }, history)\r\n            );\r\n            clear();\r\n        } else {\r\n            dispatch(\r\n                updatePost(currentId, { ...postData, name: user?.result?.name })\r\n            );\r\n            clear();\r\n        }\r\n    };\r\n\r\n    if (!user?.result?.name) {\r\n        return (\r\n            <Paper className={classes.paper} elevation={6}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                    Please Sign In to create your own Travel post and like\r\n                    other's post.\r\n                </Typography>\r\n            </Paper>\r\n        );\r\n    }\r\n\r\n    const handleAddChip = (tag) => {\r\n        setPostData({ ...postData, tags: [...postData.tags, tag] });\r\n    };\r\n\r\n    const handleDeleteChip = (chipToDelete) => {\r\n        setPostData({\r\n            ...postData,\r\n            tags: postData.tags.filter((tag) => tag !== chipToDelete),\r\n        });\r\n    };\r\n\r\n    return (\r\n        <form\r\n            autoComplete=\"off\"\r\n            noValidate\r\n            className={`${classes.root} ${classes.form}`}\r\n            onSubmit={handleSubmit}\r\n        >\r\n            <Paper\r\n                className={classes.paper}\r\n                elevation={6}\r\n                style={{ backgroundColor: \"#900C3F\" }}\r\n            >\r\n                <div\r\n                    style={{\r\n                        display: \"flex\",\r\n                        flexWrap: \"wrap\",\r\n                        justifyContent: \"space-around\",\r\n                        gap: \"130px\",\r\n                    }}\r\n                >\r\n                    <div>\r\n                        <WhiteTextTypography variant=\"h6\" style={{colour: \"white\"}}>\r\n                            {currentId\r\n                                ? `Editing \"${post?.title}\"`\r\n                                : \"Creating a Post\"}\r\n                        </WhiteTextTypography>\r\n                        <TextField\r\n                            name=\"title\"\r\n                            variant=\"outlined\"\r\n                            label=\"Headline\"\r\n                            fullWidth\r\n                            value={postData.title}\r\n                            onChange={(e) =>\r\n                                setPostData({\r\n                                    ...postData,\r\n                                    title: e.target.value,\r\n                                })\r\n                            }\r\n                        />\r\n                        <TextField\r\n                            name=\"message\"\r\n                            variant=\"outlined\"\r\n                            label=\"Whats on your mind?\"\r\n                            fullWidth\r\n                            multiline\r\n                            rows={4}\r\n                            value={postData.message}\r\n                            onChange={(e) =>\r\n                                setPostData({\r\n                                    ...postData,\r\n                                    message: e.target.value,\r\n                                })\r\n                            }\r\n                        />\r\n                        <div style={{ padding: \"5px 0\", width: \"98%\" }}>\r\n                            <ChipInput\r\n                                name=\"tags\"\r\n                                variant=\"outlined\"\r\n                                label=\"Tags\"\r\n                                fullWidth\r\n                                value={postData.tags}\r\n                                onAdd={(chip) => handleAddChip(chip)}\r\n                                onDelete={(chip) => handleDeleteChip(chip)}\r\n                            />\r\n                        </div>\r\n                        <div className={classes.fileInput}>\r\n                            <FileBase\r\n                                type=\"file\"\r\n                                multiple={false}\r\n                                onDone={({ base64 }) =>\r\n                                    setPostData({\r\n                                        ...postData,\r\n                                        selectedFile: base64,\r\n                                    })\r\n                                }\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div\r\n                        style={{\r\n                            display: \"flex\",\r\n                            flexWrap: \"wrap\",\r\n                            justifyContent: \"center\",\r\n                            gap: \"10px\",\r\n                            paddingTop: \"300px\",\r\n                        }}\r\n                    >\r\n                        <div>\r\n                            <ClearButton\r\n                                variant=\"contained\"\r\n                                color=\"secondary\"\r\n                                size=\"small\"\r\n                                onClick={clear}\r\n                                fullWidth\r\n                            >\r\n                                Clear\r\n                            </ClearButton>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <ColorButton\r\n                                className={classes.buttonSubmit}\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                size=\"small\"\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                            >\r\n                                Submit\r\n                            </ColorButton>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Paper>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default Form;\r\n"]},"metadata":{},"sourceType":"module"}